{"ast":null,"code":"import _asyncToGenerator from \"/home/fernando/Documents/completo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nexport class LoginService {\n  constructor(route, http) {\n    this.route = route;\n    this.http = http;\n    this.Usuario = '';\n    this.Contrasena = '';\n    this.usuarios = [];\n  }\n\n  Validacion(usuario, contrasena) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.http.get('http://127.0.0.1:8080/api/usuariologin' + \"/\" + usuario + \"/\" + contrasena).subscribe(resp => {\n        if (resp == null) {\n          localStorage.setItem(\"usuarioactivo\", \"\");\n          localStorage.setItem(\"localactivo\", \"\");\n          localStorage.setItem(\"adminactivo\", \"\");\n        } else {\n          localStorage.setItem(\"usuarioactivo\", resp.toString());\n        }\n\n        ;\n      });\n\n      if (localStorage.getItem(\"usuarioactivo\") != \"\") {\n        return true;\n      }\n\n      _this.http.get('http://127.0.0.1:8080/api/locallogin' + \"/\" + usuario + \"/\" + contrasena).subscribe(resp => {\n        if (resp == null) {\n          localStorage.setItem(\"usuarioactivo\", \"\");\n          localStorage.setItem(\"localactivo\", \"\");\n          localStorage.setItem(\"adminactivo\", \"\");\n        } else {\n          localStorage.setItem(\"localactivo\", resp.toString());\n        }\n\n        ;\n      });\n\n      if (localStorage.getItem(\"localactivo\") != \"\") {\n        return true;\n      }\n\n      if (usuario == 'admin' && contrasena == '123') {\n        return true;\n      } else {\n        return false;\n      }\n    })();\n  }\n\n  ingresar() {\n    if (this.Validacion(this.Usuario, this.Contrasena)) {\n      this.route.navigate(['categorias']);\n    } else {\n      alert('Invalido el usuario y contraseña');\n    }\n  }\n\n}\n\nLoginService.ɵfac = function LoginService_Factory(t) {\n  return new (t || LoginService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.HttpClient));\n};\n\nLoginService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: LoginService,\n  factory: LoginService.ɵfac,\n  providedIn: 'root'\n});\nexport const adminactivo = [];\nexport const usuarioactivo = [];\nexport const localactivo = [];","map":{"version":3,"sources":["/home/fernando/Documents/completo/src/app/login/login-main/services/login.service.ts"],"names":[],"mappings":";;;;AAYA,OAAM,MAAO,YAAP,CAAmB;AAEvB,EAAA,WAAA,CAAoB,KAApB,EAAyC,IAAzC,EAAwD;AAApC,SAAA,KAAA,GAAA,KAAA;AAAqB,SAAA,IAAA,GAAA,IAAA;AACzC,SAAA,OAAA,GAAe,EAAf;AACA,SAAA,UAAA,GAAkB,EAAlB;AACA,SAAA,QAAA,GAAmB,EAAnB;AAH6D;;AAMvD,EAAA,UAAU,CAAC,OAAD,EAAgB,UAAhB,EAAiC;AAAA;;AAAA;AAC/C,YAAM,KAAI,CAAC,IAAL,CAAU,GAAV,CAAsB,2CAAyC,GAAzC,GAA6C,OAA7C,GAAqD,GAArD,GAAyD,UAA/E,EAA2F,SAA3F,CAAsG,IAAD,IAAe;AAAC,YAAI,IAAI,IAAE,IAAV,EAAe;AAAC,UAAA,YAAY,CAAC,OAAb,CAAqB,eAArB,EAAqC,EAArC;AAAyC,UAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAmC,EAAnC;AAAuC,UAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAmC,EAAnC;AAAuC,SAAvI,MAA4I;AAAC,UAAA,YAAY,CAAC,OAAb,CAAqB,eAArB,EAAqC,IAAI,CAAC,QAAL,EAArC;AAAuD;;AAAA;AAAE,OAA3T,CAAN;;AAEA,UAAG,YAAY,CAAC,OAAb,CAAqB,eAArB,KAAuC,EAA1C,EAA6C;AAC3C,eAAO,IAAP;AACD;;AACD,MAAA,KAAI,CAAC,IAAL,CAAU,GAAV,CAAsB,yCAAuC,GAAvC,GAA2C,OAA3C,GAAmD,GAAnD,GAAuD,UAA7E,EAAyF,SAAzF,CAAoG,IAAD,IAAe;AAAC,YAAI,IAAI,IAAE,IAAV,EAAe;AAAC,UAAA,YAAY,CAAC,OAAb,CAAqB,eAArB,EAAqC,EAArC;AAAyC,UAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAmC,EAAnC;AAAuC,UAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAmC,EAAnC;AAAuC,SAAvI,MAA4I;AAAC,UAAA,YAAY,CAAC,OAAb,CAAqB,aAArB,EAAmC,IAAI,CAAC,QAAL,EAAnC;AAAqD;;AAAA;AAAE,OAAvT;;AACA,UAAI,YAAY,CAAC,OAAb,CAAqB,aAArB,KAAqC,EAAzC,EAA6C;AAC3C,eAAO,IAAP;AAED;;AACD,UAAG,OAAO,IAAE,OAAT,IAAoB,UAAU,IAAE,KAAnC,EAA0C;AACxC,eAAO,IAAP;AACD,OAFD,MAII;AACF,eAAO,KAAP;AACD;AAjB8C;AAoBlD;;AAKC,EAAA,QAAQ,GAAA;AACN,QAAG,KAAK,UAAL,CAAgB,KAAK,OAArB,EAA6B,KAAK,UAAlC,CAAH,EAAiD;AAC/C,WAAK,KAAL,CAAW,QAAX,CAAoB,CAAC,YAAD,CAApB;AACD,KAFD,MAGI;AACF,MAAA,KAAK,CAAC,kCAAD,CAAL;AACD;AACF;;AAxCsB;;;mBAAZ,Y,EAAY,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,MAAA,C,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C;AAAA,C;;;SAAZ,Y;AAAY,EAAA,OAAA,EAAZ,YAAY,CAAA,I;AAAA,EAAA,UAAA,EAFX;;AA4Cd,OAAO,MAAM,WAAW,GAAU,EAA3B;AACP,OAAO,MAAM,aAAa,GAAW,EAA9B;AACP,OAAO,MAAM,WAAW,GAAS,EAA1B","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Usuario, usuarios } from 'src/app/modelo/usuario.class';\nimport { Router } from '@angular/router';\nimport { locales, Local } from '../../../modelo/local.class';\nimport { HttpClient } from '@angular/common/http';\n\n\n\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoginService {\n\n  constructor(private route:Router,private http:HttpClient) { }\n  Usuario:string=''\n  Contrasena:string=''\n  usuarios:Usuario[]=[]\n  \n\n  async Validacion(usuario:string,contrasena:string):Boolean{\n    await this.http.get<number>('http://127.0.0.1:8080/api/usuariologin'+\"/\"+usuario+\"/\"+contrasena).subscribe((resp:number)=>{if (resp==null){localStorage.setItem(\"usuarioactivo\",\"\");localStorage.setItem(\"localactivo\",\"\");localStorage.setItem(\"adminactivo\",\"\")} else{localStorage.setItem(\"usuarioactivo\",resp.toString());};});\n    \n    if(localStorage.getItem(\"usuarioactivo\")!=\"\"){\n      return true\n    }\n    this.http.get<number>('http://127.0.0.1:8080/api/locallogin'+\"/\"+usuario+\"/\"+contrasena).subscribe((resp:number)=>{if (resp==null){localStorage.setItem(\"usuarioactivo\",\"\");localStorage.setItem(\"localactivo\",\"\");localStorage.setItem(\"adminactivo\",\"\")} else{localStorage.setItem(\"localactivo\",resp.toString());};});\n    if (localStorage.getItem(\"localactivo\")!=\"\") {\n      return true\n    \n    } \n    if(usuario=='admin' && contrasena=='123') {\n      return true\n    }\n    \n    else{\n      return false\n    }\n\n    \n}\n\n  \n\n\n  ingresar():void{   \n    if(this.Validacion(this.Usuario,this.Contrasena)){\n      this.route.navigate(['categorias'])\n    }\n    else{\n      alert('Invalido el usuario y contraseña')\n    }\n  }\n}\nexport const adminactivo:String[]=[]\nexport const usuarioactivo:Usuario[]=[]\nexport const localactivo:Local[]=[]\n\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}