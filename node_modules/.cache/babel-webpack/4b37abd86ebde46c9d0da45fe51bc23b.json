{"ast":null,"code":"import _asyncToGenerator from \"/home/fernando/Documents/completo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { DetalleReserva } from \"src/app/modelo/detallereserva.class\";\nimport { categoriaActiva } from '../../categoria/services/categoria.service';\nimport { usuarioactivo, localactivo, adminactivo } from '../../login/login-main/services/login.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nexport class ProductoService {\n  constructor(route, http) {\n    this.route = route;\n    this.http = http;\n    this.lista = [];\n    this.lista1 = [];\n    this.lista2 = [];\n    this.productoslocal = [];\n    this.productocategoria = [];\n    this.detallesreserva = [];\n    this.usuarioactivo = usuarioactivo;\n    this.localactivo = localactivo;\n    this.adminactivo = adminactivo;\n    this.categoria = categoriaActiva;\n  }\n\n  agregar(productolocal) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const promesa = _this.http.put('http://127.0.0.1:8080/api/detallereserva' + '/' + localStorage.getItem(\"carrito\") + '/' + productolocal.codProductoLocal.toString, \"\").toPromise();\n\n      return promesa.then(value => {\n        return true;\n      });\n      _this.detallesreserva = _this.detallesreserva.filter(elemen => elemen.tieneReserva.estadoReserva == false && elemen.tieneReserva.tieneUsuario.dniUsuario == usuarioactivo[0].dniUsuario);\n      let nuevodetallereserva = new DetalleReserva(0, 1, productolocal, _this.detallesreserva[0].tieneReserva); //const promesa = this.http.post<ProductoLocal>('http://localhost:8080/api/productolocal',nuevodetallereserva).toPromise();\n      //return promesa.then(value =>{return true});\n    })();\n  }\n\n  login() {\n    console.log(usuarioactivo);\n    this.route.navigate(['login']);\n  }\n\n  filtrar() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      if (localStorage.getItem(\"categoriaactiva\") == \"\") {\n        yield _this2.http.get('http://127.0.0.1:8080/api/productolocal').toPromise().then(resp => {\n          _this2.productoslocal = resp;\n        });\n        return _this2.productoslocal;\n      } else {\n        yield _this2.http.get('http://127.0.0.1:8080/api/productolocalcategoria/' + localStorage.getItem(\"categoriaactiva\")).toPromise().then(resp => {\n          _this2.productoslocal = resp;\n        });\n      }\n\n      return _this2.productoslocal; //lista de productos locales filtaradas por categoriaasasasasasas\n    })();\n  }\n\n}\n\nProductoService.ɵfac = function ProductoService_Factory(t) {\n  return new (t || ProductoService)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.HttpClient));\n};\n\nProductoService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ProductoService,\n  factory: ProductoService.ɵfac,\n  providedIn: 'root'\n});\nconst productocategoria = [];","map":{"version":3,"sources":["/home/fernando/Documents/completo/src/app/productos/services/producto.service.ts"],"names":[],"mappings":";AAEA,SAAS,cAAT,QAA+B,qCAA/B;AAEA,SAAS,eAAT,QAAgC,4CAAhC;AAEA,SAAS,aAAT,EAAwB,WAAxB,EAAqC,WAArC,QAAwD,+CAAxD;;;;AAMA,OAAM,MAAO,eAAP,CAAsB;AAC5B,EAAA,WAAA,CAAoB,KAApB,EAA0C,IAA1C,EAAyD;AAArC,SAAA,KAAA,GAAA,KAAA;AAAsB,SAAA,IAAA,GAAA,IAAA;AAGnC,SAAA,KAAA,GAAiB,EAAjB;AACA,SAAA,MAAA,GAAuB,EAAvB;AACA,SAAA,MAAA,GAAmB,EAAnB;AAEP,SAAA,cAAA,GAA+B,EAA/B;AACA,SAAA,iBAAA,GAA6B,EAA7B;AACA,SAAA,eAAA,GAAiC,EAAjC;AAWA,SAAA,aAAA,GAAc,aAAd;AACA,SAAA,WAAA,GAAY,WAAZ;AACA,SAAA,WAAA,GAAY,WAAZ;AACA,SAAA,SAAA,GAAU,eAAV;AAtBE;;AASI,EAAA,OAAO,CAAC,aAAD,EAA4B;AAAA;;AAAA;AACrC,YAAM,OAAO,GAAE,KAAI,CAAC,IAAL,CAAU,GAAV,CAAmB,6CAA6C,GAA7C,GAAkD,YAAY,CAAC,OAAb,CAAqB,SAArB,CAAlD,GAAkF,GAAlF,GAAsF,aAAa,CAAC,gBAAd,CAA+B,QAAxI,EAAiJ,EAAjJ,EAAqJ,SAArJ,EAAf;;AACI,aAAO,OAAO,CAAC,IAAR,CAAa,KAAK,IAAE;AAAC,eAAO,IAAP;AAAY,OAAjC,CAAP;AACJ,MAAA,KAAI,CAAC,eAAL,GAAsB,KAAI,CAAC,eAAL,CAAqB,MAArB,CAA4B,MAAM,IAAI,MAAM,CAAC,YAAP,CAAoB,aAApB,IAAmC,KAAnC,IAA4C,MAAM,CAAC,YAAP,CAAoB,YAApB,CAAiC,UAAjC,IAA6C,aAAa,CAAC,CAAD,CAAb,CAAiB,UAAhJ,CAAtB;AACA,UAAI,mBAAmB,GAAG,IAAI,cAAJ,CAAmB,CAAnB,EAAqB,CAArB,EAAuB,aAAvB,EAAqC,KAAI,CAAC,eAAL,CAAqB,CAArB,EAAwB,YAA7D,CAA1B,CAJqC,CAKrC;AACI;AANiC;AAQxC;;AAMD,EAAA,KAAK,GAAA;AACD,IAAA,OAAO,CAAC,GAAR,CAAY,aAAZ;AACA,SAAK,KAAL,CAAW,QAAX,CAAoB,CAAC,OAAD,CAApB;AACH;;AAIK,EAAA,OAAO,GAAA;AAAA;;AAAA;AACT,UAAG,YAAY,CAAC,OAAb,CAAqB,iBAArB,KAAyC,EAA5C,EAA+C;AAC3C,cAAM,MAAI,CAAC,IAAL,CAAU,GAAV,CAA+B,yCAA/B,EAA0E,SAA1E,GAAsF,IAAtF,CAA4F,IAAD,IAAwB;AAAC,UAAA,MAAI,CAAC,cAAL,GAAoB,IAApB;AAA0B,SAA9I,CAAN;AACA,eAAO,MAAI,CAAC,cAAZ;AACH,OAHD,MAII;AACA,cAAM,MAAI,CAAC,IAAL,CAAU,GAAV,CAA+B,sDAAoD,YAAY,CAAC,OAAb,CAAqB,iBAArB,CAAnF,EAA4H,SAA5H,GAAwI,IAAxI,CAA8I,IAAD,IAAwB;AAAC,UAAA,MAAI,CAAC,cAAL,GAAoB,IAApB;AAA0B,SAAhM,CAAN;AAEH;;AACD,aAAO,MAAI,CAAC,cAAZ,CATS,CAUT;AAVS;AAWZ;;AA3C2B;;;mBAAf,e,EAAe,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,MAAA,C,EAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,UAAA,C;AAAA,C;;;SAAf,e;AAAe,EAAA,OAAA,EAAf,eAAe,CAAA,I;AAAA,EAAA,UAAA,EAFb;;AAiDf,MAAM,iBAAiB,GAAa,EAApC","sourcesContent":["import { Injectable } from \"@angular/core\";\nimport { Categoria } from \"src/app/modelo/categoria.class\";\nimport { DetalleReserva } from \"src/app/modelo/detallereserva.class\";\nimport { ProductoLocal} from \"src/app/modelo/productolocal.class\";\nimport { categoriaActiva } from '../../categoria/services/categoria.service';\nimport { Producto} from '../../modelo/producto.class';\nimport { usuarioactivo, localactivo, adminactivo } from '../../login/login-main/services/login.service';\nimport { Router } from '@angular/router';\nimport { HttpClient } from \"@angular/common/http\";\n@Injectable({\n    providedIn:'root'\n})\nexport class ProductoService{\nconstructor(private route:Router, private http:HttpClient) {\n }\n\npublic lista:Producto[]=[]\npublic lista1:ProductoLocal[]=[]\npublic lista2:Categoria[]=[]\n\nproductoslocal:ProductoLocal[]=[];\nproductocategoria:Producto[]=[]\ndetallesreserva:DetalleReserva[]=[]\nasync agregar(productolocal:ProductoLocal){\n    const promesa =this.http.put<any>('http://127.0.0.1:8080/api/detallereserva' + '/'+ localStorage.getItem(\"carrito\")+'/'+productolocal.codProductoLocal.toString,\"\").toPromise();\n        return promesa.then(value=>{return true})\n    this.detallesreserva= this.detallesreserva.filter(elemen => elemen.tieneReserva.estadoReserva==false && elemen.tieneReserva.tieneUsuario.dniUsuario==usuarioactivo[0].dniUsuario);\n    let nuevodetallereserva = new DetalleReserva(0,1,productolocal,this.detallesreserva[0].tieneReserva)\n    //const promesa = this.http.post<ProductoLocal>('http://localhost:8080/api/productolocal',nuevodetallereserva).toPromise();\n        //return promesa.then(value =>{return true});\n       \n}\n\nusuarioactivo=usuarioactivo\nlocalactivo=localactivo\nadminactivo=adminactivo\ncategoria=categoriaActiva\nlogin(){\n    console.log(usuarioactivo)\n    this.route.navigate(['login'])\n}\n\n\n\nasync filtrar():Promise<ProductoLocal[]{\n    if(localStorage.getItem(\"categoriaactiva\")==\"\"){\n        await this.http.get<ProductoLocal[]>('http://127.0.0.1:8080/api/productolocal').toPromise().then((resp:ProductoLocal[])=>{this.productoslocal=resp;});\n        return this.productoslocal\n    }\n    else{\n        await this.http.get<ProductoLocal[]>('http://127.0.0.1:8080/api/productolocalcategoria/'+localStorage.getItem(\"categoriaactiva\")).toPromise().then((resp:ProductoLocal[])=>{this.productoslocal=resp;});      \n        \n    }\n    return this.productoslocal\n    //lista de productos locales filtaradas por categoriaasasasasasas\n}\n\n}\n\nconst productocategoria:Categoria[]=[]\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}